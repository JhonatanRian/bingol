const authPopup={authPopupWrapperClass:'.auth-popup-wrapper',linksAuthPopupClass:'.auth-popup',isPopupAppended:!1,iframeSrcPostfix:{name:'isIframe',value:1},iframeOrigin:null,iframeSrc:null,init:function(){$(authPopup.linksAuthPopupClass).click(function(){if(authPopup.isMobile()||authPopup.isIpadDevice()){return!0}
if(authPopup.isPopupAppended===!1){authPopup.iframeOrigin=new URL($(this).attr('href'));authPopup.iframeOrigin.searchParams.append(authPopup.iframeSrcPostfix.name,authPopup.iframeSrcPostfix.value);authPopup.iframeSrc=authPopup.iframeOrigin.toString();$(authPopup.getPopupHtml()).appendTo('body');$('.auth-popup-iframe').load(function(){$(authPopup.authPopupWrapperClass+' .loading').hide()});$(authPopup.authPopupWrapperClass).click(function(){$(authPopup.authPopupWrapperClass).fadeOut()});$(authPopup.authPopupWrapperClass+' .close').click(function(){$(authPopup.authPopupWrapperClass).fadeOut()});window.addEventListener('message',function(e){if(e.origin===authPopup.iframeOrigin.origin&&e.data==='closeAuthPopup'){$(authPopup.authPopupWrapperClass).fadeOut()}});$(".auth-popup-div").click(function(e){e.stopPropagation()});authPopup.isPopupAppended=!0}else{$(authPopup.authPopupWrapperClass).fadeIn()}
return!1})},isMobile:function(){let md=new MobileDetect(window.navigator.userAgent);if(md.mobile()){return!0}},isIpadDevice:function(){let ua=window.navigator.userAgent||window.navigator.vendor||window.opera;return(/ipad/i.test(ua)&&!window.MSStream)||(/ipad/i.test(window.navigator.platform))||(/macintel/i.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1)},getPopupHtml:function(){return'<div class="'+authPopup.authPopupWrapperClass.replace('.','')+'">'+'<div class="auth-popup-div">'+'<div class="loading"></div>'+'<iframe class="auth-popup-iframe" src="'+authPopup.iframeSrc+'" width="320" height="345"></iframe>'+'</div>'+'</div>'}}
jQuery(document).ready(function(){$=jQuery.noConflict();authPopup.init()})